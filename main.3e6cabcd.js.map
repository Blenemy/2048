{"version":3,"sources":["scripts/main.js"],"names":["score","document","querySelector","buttonStart","messageLose","messageStart","messageWin","getRandomIntInclusive","min","max","Math","floor","random","ceil","restartGame","cells","querySelectorAll","cell","innerHTML","className","hidden","numberAdder","times","i","emptyFields","filter","length","randomEmptyCell","value","classList","add","gameWinner","find","el","clearEmptyCells","array","transformIntoArray","map","Number","moveBottom","childIndex","result","forEach","push","children","reverse","unshift","moveTop","moveLeft","moveRight","possibleMove","gameOver","addClassesToCells","isPowerOf2","addEventListener","e","keyCode","trs","allCells","notMoved","item","moved","JSON","stringify","notChangedCells","beforeMove","changedCells","target","contains","remove"],"mappings":";AAEA,aA2SC,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAzSD,IAAMA,EAAQC,SAASC,cAAc,eAC/BC,EAAcF,SAASC,cAAc,UACrCE,EAAcH,SAASC,cAAc,iBACrCG,EAAeJ,SAASC,cAAc,kBACtCI,EAAaL,SAASC,cAAc,gBAE1C,SAASK,EAAsBC,EAAKC,GAC3BC,OAAAA,KAAKC,MACVD,KAAKE,UAAYF,KAAKC,MAAMF,GAAOC,KAAKG,KAAKL,GAAO,GAAKE,KAAKG,KAAKL,IAIvE,SAASM,IACDC,IADe,EAGFA,EAAAA,EAFLd,SAASe,iBAAiB,gBADnB,IAGK,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAfC,IAAAA,EAAe,EAAA,MACxBA,EAAKC,UAAY,GACjBD,EAAKE,UAAY,cALE,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAQrBnB,EAAMkB,UAAY,IAClBd,EAAYgB,QAAS,EACrBf,EAAae,QAAS,EACtBd,EAAWc,QAAS,EAEpBC,EAAY,GAGd,SAASA,IACF,IADcC,IAAAA,EAAQ,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAClBC,EAAI,EAAGA,EAAID,EAAOC,IAAK,CACxBC,IAAAA,EAAc,EAAIvB,SAASe,iBAAiB,gBAAgBS,OAChE,SAACR,GAAS,OAACA,EAAKC,UAAUQ,SAGxB,IAACF,EAAYE,OACf,OAGIC,IAAAA,EACJH,EAAYjB,EAAsB,EAAGiB,EAAYE,OAAS,IACtDE,EAAQlB,KAAKE,SAAW,GAAM,IAAM,IAE1Ce,EAAgBT,UAAYU,EAC5BD,EAAgBE,UAAUC,IAAmBF,eAAAA,OAAAA,KAIjD,SAASG,IAES,EADC9B,SAASe,iBAAiB,gBACbgB,KAAK,SAACC,GAAOA,MAAiB,SAAjBA,EAAGf,cAG5CZ,EAAWc,QAAS,GAIxB,SAASc,EAAgBC,GAChBA,OAAAA,EAAMV,OAAO,SAACQ,GAAOA,OAAO,IAAPA,IAG9B,SAASG,EAAmBD,GACnBA,OAAAA,EACJV,OAAO,SAACQ,GAAOA,OAAAA,EAAGf,YAClBmB,IAAI,SAACJ,GAAOA,OAAAA,EAAGf,YACfmB,IAAIC,QAGT,SAASC,EAAWJ,EAAOK,GACrBC,IAAAA,EAAS,GAQTA,GANJN,EAAMO,QAAQ,SAACT,GACbQ,EAAOE,MAAMV,EAAGW,SAASJ,GAAYtB,cAGvCuB,EAASP,EAAgBO,EAAOI,YAErBnB,OAAS,EACb,IAAA,IAAIH,EAAI,EAAGA,EAAIkB,EAAOf,OAAS,EAAGH,IACjCkB,EAAOlB,KAAOkB,EAAOlB,EAAI,KAC3BvB,EAAMkB,WAAalB,EAAMkB,UAA4B,EAAhBuB,EAAOlB,EAAI,GAChDkB,EAAOlB,EAAI,IAAM,EACjBkB,EAAOlB,GAAK,GAOXkB,IAFPA,EAASP,EAAgBO,EAAOI,WAEzBJ,EAAOf,OAAS,GACrBe,EAAOK,QAAQ,GAGjBX,EAAMO,QAAQ,SAACT,EAAIV,GACjBU,EAAGW,SAASJ,GAAYtB,UAAYuB,EAAOlB,IAAM,KAIrD,SAASwB,EAAQZ,EAAOK,GAClBC,IAAAA,EAAS,GAQTA,GANJN,EAAMO,QAAQ,SAACT,GACbQ,EAAOE,MAAMV,EAAGW,SAASJ,GAAYtB,cAGvCuB,EAASP,EAAgBO,IAEdf,OAAS,EACb,IAAA,IAAIH,EAAI,EAAGA,EAAIkB,EAAOf,OAAS,EAAGH,IACjCkB,EAAOlB,KAAOkB,EAAOlB,EAAI,KAC3BvB,EAAMkB,WAAalB,EAAMkB,UAAwB,EAAZuB,EAAOlB,GAC5CkB,EAAOlB,IAAM,EACbkB,EAAOlB,EAAI,GAAK,GAOfkB,IAFPA,EAASP,EAAgBO,GAElBA,EAAOf,OAAS,GACrBe,EAAOE,KAAK,GAGdR,EAAMO,QAAQ,SAACT,EAAIV,GACjBU,EAAGW,SAASJ,GAAYtB,UAAYuB,EAAOlB,IAAM,KAIrD,SAASyB,EAASb,GAChBA,EAAMO,QAAQ,SAACT,GACTlB,IAAAA,EAAQkB,EAAGjB,iBAAiB,eAI5BD,IAFJA,EAAQqB,EAAuBrB,EAAAA,KAErBW,OAAS,EACZ,IAAA,IAAIH,EAAI,EAAGA,EAAIR,EAAMW,OAAS,EAAGH,IAChCR,EAAMQ,KAAOR,EAAMQ,EAAI,KACzBvB,EAAMkB,WAAalB,EAAMkB,UAAuB,EAAXH,EAAMQ,GAC3CR,EAAMQ,IAAM,EACZR,EAAMQ,EAAI,GAAK,GAOdR,IAFPA,EAAQmB,EAAgBnB,GAEjBA,EAAMW,OAAS,GACpBX,EAAM4B,KAAK,GAGR,IAAA,IAAIpB,EAAI,EAAGA,EAAIU,EAAGW,SAASlB,OAAQH,IACtCU,EAAGW,SAASrB,GAAGL,UAAYH,EAAMQ,IAAM,KAK7C,SAAS0B,EAAUd,GACjBA,EAAMO,QAAQ,SAACT,GACTlB,IAAAA,EAAQkB,EAAGjB,iBAAiB,eAI5BD,IAFJA,EAAQqB,EAAuBrB,EAAAA,IAAQ8B,WAE7BnB,OAAS,EACZ,IAAA,IAAIH,EAAI,EAAGA,EAAIR,EAAMW,OAAS,EAAGH,IAChCR,EAAMQ,KAAOR,EAAMQ,EAAI,KACzBvB,EAAMkB,WAAalB,EAAMkB,UAAuB,EAAXH,EAAMQ,GAC3CR,EAAMQ,IAAM,EACZR,EAAMQ,EAAI,GAAK,GAOdR,IAFPA,EAAQmB,EAAgBnB,EAAM8B,WAEvB9B,EAAMW,OAAS,GACpBX,EAAM+B,QAAQ,GAGX,IAAA,IAAIvB,EAAIU,EAAGW,SAASlB,OAAS,EAAGH,GAAK,EAAGA,IAC3CU,EAAGW,SAASrB,GAAGL,UAAYH,EAAMQ,IAAM,KAK7C,SAAS2B,EAAaf,GACpBY,EAAQZ,EAAO,GACfY,EAAQZ,EAAO,GACfY,EAAQZ,EAAO,GACfY,EAAQZ,EAAO,GACfI,EAAWJ,EAAO,GAClBI,EAAWJ,EAAO,GAClBI,EAAWJ,EAAO,GAClBI,EAAWJ,EAAO,GAClBa,EAASb,GACTc,EAAUd,GAGZ,SAASgB,IACP/C,EAAYgB,QAAS,EACrBf,EAAae,QAAS,EAuFxB,SAASgC,EAAkBjB,GACzBA,EAAMO,QAAQ,SAACzB,GACbA,EAAKE,UAAY,aAEbF,EAAKC,WAAamC,GAAYpC,EAAKC,YACrCD,EAAKY,UAAUC,IAAmBb,eAAAA,OAAAA,EAAKC,cAK7C,SAASmC,EAAWzB,GACXA,OAAAA,GAAmC,IAAzBA,EAASA,EAAQ,GA/FpC3B,SAASqD,iBAAiB,UAAW,SAACC,GAChCA,KAAAA,EAAEC,QAAU,IAAMD,EAAEC,QAAU,IAA9BD,CAIEE,IAAAA,EAAMxD,SAASe,iBAAiB,cAChC0C,EAAWzD,SAASe,iBAAiB,eACvC2C,EAAW1D,SAASe,iBAAiB,eAKjCuC,OAHRI,EAAW,EAAIA,GAAUtB,IAAI,SAACuB,GAASA,OAAAA,EAAK1C,YAC5CkC,EAAkBM,GAEVH,EAAEC,SACH,KAAA,GACHR,EAASS,GACT,MACG,KAAA,GACHV,EAAQU,EAAK,GACbV,EAAQU,EAAK,GACbV,EAAQU,EAAK,GACbV,EAAQU,EAAK,GACb,MACG,KAAA,GACHR,EAAUQ,GACV,MACG,KAAA,GACHlB,EAAWkB,EAAK,GAChBlB,EAAWkB,EAAK,GAChBlB,EAAWkB,EAAK,GAChBlB,EAAWkB,EAAK,GAIpB1B,IAEI8B,IAAAA,EAAQ5D,SAASe,iBAAiB,eAalCQ,GAXJqC,EAAQ,EAAIA,GAAOxB,IAAI,SAACuB,GAASA,OAAAA,EAAK1C,YAElC4C,KAAKC,UAAUJ,KAAcG,KAAKC,UAAUF,KAC9CxC,IACA+B,EAAkBM,IAOO,IAJP,EAAIzD,SAASe,iBAAiB,gBAAgBS,OAChE,SAACQ,GAAOA,OAAwB,IAAxBA,EAAGf,UAAUQ,SAGPA,OAAc,CACtBsC,IAAAA,EAAkB/D,SAASe,iBAAiB,eAC5CiD,EAAa,EAAID,GAAiB3B,IAAI,SAACuB,GAASA,OAAAA,EAAK1C,YAE3DgC,EAAaO,GAETS,IAAAA,EAAejE,SAASe,iBAAiB,eAIzC8C,GAFJI,EAAe,EAAIA,GAAc7B,IAAI,SAACuB,GAASA,OAAAA,EAAK1C,YAEhD4C,KAAKC,UAAUE,KAAgBH,KAAKC,UAAUG,GAChDf,SAEK,IAAA,IAAI5B,EAAI,EAAGA,EAAIyC,EAAgBtC,OAAQH,IAC1CyC,EAAgBzC,GAAGL,UAAY+C,EAAW1C,OAMlDtB,SAASqD,iBAAiB,QAAS,SAACC,GAC9BA,EAAEY,OAAOtC,UAAUuC,SAAS,WAC9B/C,EAAY,GAEZhB,EAAae,QAAS,EAEtBjB,EAAY0B,UAAUwC,OAAO,SAC7BlE,EAAY0B,UAAUC,IAAI,WAC1B3B,EAAYe,UAAY,WAGtBqC,EAAEY,OAAOtC,UAAUuC,SAAS,YAC9BtD","file":"main.3e6cabcd.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable operator-linebreak */\n/* eslint-disable quotes */\n\"use strict\";\n\nconst score = document.querySelector(\".game-score\");\nconst buttonStart = document.querySelector(\".start\");\nconst messageLose = document.querySelector(\".message-lose\");\nconst messageStart = document.querySelector(\".message-start\");\nconst messageWin = document.querySelector(\".message-win\");\n\nfunction getRandomIntInclusive(min, max) {\n  return Math.floor(\n    Math.random() * (Math.floor(max) - Math.ceil(min) + 1) + Math.ceil(min)\n  );\n}\n\nfunction restartGame() {\n  const cells = document.querySelectorAll(\".field-cell\");\n\n  for (const cell of cells) {\n    cell.innerHTML = \"\";\n    cell.className = \"field-cell\";\n  }\n\n  score.innerHTML = \"0\";\n  messageLose.hidden = true;\n  messageStart.hidden = true;\n  messageWin.hidden = true;\n\n  numberAdder(3);\n}\n\nfunction numberAdder(times = 1) {\n  for (let i = 0; i < times; i++) {\n    const emptyFields = [...document.querySelectorAll(\".field-cell\")].filter(\n      (cell) => !cell.innerHTML.length\n    );\n\n    if (!emptyFields.length) {\n      return;\n    }\n\n    const randomEmptyCell =\n      emptyFields[getRandomIntInclusive(0, emptyFields.length - 1)];\n    const value = Math.random() > 0.1 ? \"2\" : \"4\";\n\n    randomEmptyCell.innerHTML = value;\n    randomEmptyCell.classList.add(`field-cell--${value}`);\n  }\n}\n\nfunction gameWinner() {\n  const allCells = document.querySelectorAll(\".field-cell\");\n  const has2048 = [...allCells].find((el) => el.innerHTML === \"2048\");\n\n  if (has2048) {\n    messageWin.hidden = false;\n  }\n}\n\nfunction clearEmptyCells(array) {\n  return array.filter((el) => el !== 0);\n}\n\nfunction transformIntoArray(array) {\n  return array\n    .filter((el) => el.innerHTML)\n    .map((el) => el.innerHTML)\n    .map(Number);\n}\n\nfunction moveBottom(array, childIndex) {\n  let result = [];\n\n  array.forEach((el) => {\n    result.push(+el.children[childIndex].innerHTML);\n  });\n\n  result = clearEmptyCells(result.reverse());\n\n  if (result.length > 0) {\n    for (let i = 0; i < result.length - 1; i++) {\n      if (result[i] === result[i + 1]) {\n        score.innerHTML = +score.innerHTML + result[i + 1] * 2;\n        result[i + 1] *= 2;\n        result[i] = 0;\n      }\n    }\n  }\n\n  result = clearEmptyCells(result.reverse());\n\n  while (result.length < 4) {\n    result.unshift(0);\n  }\n\n  array.forEach((el, i) => {\n    el.children[childIndex].innerHTML = result[i] || \"\";\n  });\n}\n\nfunction moveTop(array, childIndex) {\n  let result = [];\n\n  array.forEach((el) => {\n    result.push(+el.children[childIndex].innerHTML);\n  });\n\n  result = clearEmptyCells(result);\n\n  if (result.length > 0) {\n    for (let i = 0; i < result.length - 1; i++) {\n      if (result[i] === result[i + 1]) {\n        score.innerHTML = +score.innerHTML + result[i] * 2;\n        result[i] *= 2;\n        result[i + 1] = 0;\n      }\n    }\n  }\n\n  result = clearEmptyCells(result);\n\n  while (result.length < 4) {\n    result.push(0);\n  }\n\n  array.forEach((el, i) => {\n    el.children[childIndex].innerHTML = result[i] || \"\";\n  });\n}\n\nfunction moveLeft(array) {\n  array.forEach((el) => {\n    let cells = el.querySelectorAll(\".field-cell\");\n\n    cells = transformIntoArray([...cells]);\n\n    if (cells.length > 0) {\n      for (let i = 0; i < cells.length - 1; i++) {\n        if (cells[i] === cells[i + 1]) {\n          score.innerHTML = +score.innerHTML + cells[i] * 2;\n          cells[i] *= 2;\n          cells[i + 1] = 0;\n        }\n      }\n    }\n\n    cells = clearEmptyCells(cells);\n\n    while (cells.length < 4) {\n      cells.push(0);\n    }\n\n    for (let i = 0; i < el.children.length; i++) {\n      el.children[i].innerHTML = cells[i] || \"\";\n    }\n  });\n}\n\nfunction moveRight(array) {\n  array.forEach((el) => {\n    let cells = el.querySelectorAll(\".field-cell\");\n\n    cells = transformIntoArray([...cells]).reverse();\n\n    if (cells.length > 0) {\n      for (let i = 0; i < cells.length - 1; i++) {\n        if (cells[i] === cells[i + 1]) {\n          score.innerHTML = +score.innerHTML + cells[i] * 2;\n          cells[i] *= 2;\n          cells[i + 1] = 0;\n        }\n      }\n    }\n\n    cells = clearEmptyCells(cells.reverse());\n\n    while (cells.length < 4) {\n      cells.unshift(0);\n    }\n\n    for (let i = el.children.length - 1; i >= 0; i--) {\n      el.children[i].innerHTML = cells[i] || \"\";\n    }\n  });\n}\n\nfunction possibleMove(array) {\n  moveTop(array, 0);\n  moveTop(array, 1);\n  moveTop(array, 2);\n  moveTop(array, 3);\n  moveBottom(array, 0);\n  moveBottom(array, 1);\n  moveBottom(array, 2);\n  moveBottom(array, 3);\n  moveLeft(array);\n  moveRight(array);\n}\n\nfunction gameOver() {\n  messageLose.hidden = false;\n  messageStart.hidden = true;\n}\n\ndocument.addEventListener(\"keydown\", (e) => {\n  if (e.keyCode < 37 || e.keyCode > 40) {\n    return;\n  }\n\n  const trs = document.querySelectorAll(\".field-row\");\n  const allCells = document.querySelectorAll(\".field-cell\");\n  let notMoved = document.querySelectorAll(\".field-cell\");\n\n  notMoved = [...notMoved].map((item) => item.innerHTML);\n  addClassesToCells(allCells);\n\n  switch (e.keyCode) {\n    case 37:\n      moveLeft(trs);\n      break;\n    case 38:\n      moveTop(trs, 0);\n      moveTop(trs, 1);\n      moveTop(trs, 2);\n      moveTop(trs, 3);\n      break;\n    case 39:\n      moveRight(trs);\n      break;\n    case 40:\n      moveBottom(trs, 0);\n      moveBottom(trs, 1);\n      moveBottom(trs, 2);\n      moveBottom(trs, 3);\n      break;\n  }\n\n  gameWinner();\n\n  let moved = document.querySelectorAll(\".field-cell\");\n\n  moved = [...moved].map((item) => item.innerHTML);\n\n  if (JSON.stringify(notMoved) !== JSON.stringify(moved)) {\n    numberAdder();\n    addClassesToCells(allCells);\n  }\n\n  const emptyFields = [...document.querySelectorAll(\".field-cell\")].filter(\n    (el) => el.innerHTML.length === 0\n  );\n\n  if (emptyFields.length === 0) {\n    const notChangedCells = document.querySelectorAll(\".field-cell\");\n    const beforeMove = [...notChangedCells].map((item) => item.innerHTML);\n\n    possibleMove(trs);\n\n    let changedCells = document.querySelectorAll(\".field-cell\");\n\n    changedCells = [...changedCells].map((item) => item.innerHTML);\n\n    if (JSON.stringify(beforeMove) === JSON.stringify(changedCells)) {\n      gameOver();\n    } else {\n      for (let i = 0; i < notChangedCells.length; i++) {\n        notChangedCells[i].innerHTML = beforeMove[i];\n      }\n    }\n  }\n});\n\ndocument.addEventListener(\"click\", (e) => {\n  if (e.target.classList.contains(\"start\")) {\n    numberAdder(3);\n\n    messageStart.hidden = true;\n\n    buttonStart.classList.remove(\"start\");\n    buttonStart.classList.add(\"restart\");\n    buttonStart.innerHTML = \"Restart\";\n  }\n\n  if (e.target.classList.contains(\"restart\")) {\n    restartGame();\n  }\n});\n\nfunction addClassesToCells(array) {\n  array.forEach((cell) => {\n    cell.className = \"field-cell\";\n\n    if (cell.innerHTML && isPowerOf2(+cell.innerHTML)) {\n      cell.classList.add(`field-cell--${cell.innerHTML}`);\n    }\n  });\n}\n\nfunction isPowerOf2(value) {\n  return value && (value & (value - 1)) === 0;\n}\n"]}